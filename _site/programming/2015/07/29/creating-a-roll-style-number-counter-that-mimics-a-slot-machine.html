<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Creating a Roll Style Number Counter that Mimics a Slot Machine</title>
  <meta name="description" content="I found a really cool way of making a number counter engaging. A co-worker at Salesforce, named Amy Lee, created a simple React component designed to mimic a...">

  <!-- React -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.13.3/react.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.13.3/JSXTransformer.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>



  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://khou22.github.io/programming/2015/07/29/creating-a-roll-style-number-counter-that-mimics-a-slot-machine.html">
  <link rel="alternate" type="application/rss+xml" title="Kevin Hou's Blog" href="http://khou22.github.io/feed.xml" />

  <!-- Bootstrap -->
  <link href="/css/bootstrap-3.3.5-dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <script src="/css/bootstrap-3.3.5-dist/js/bootstrap.min.js"></script>

  <!-- Google Analytics -->
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-66796355-1', 'auto');
      ga('send', 'pageview');

    </script>

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/media/site/favicon.png">
</head>


  <body>

    <header class="site-header">
  <div class="wrapper">

    <a class="site-title external-custom-spacing" href="/">
      <img src="/media/site/favicon.png" width="48" height="48" align="middle">
      Kevin Hou's Blog
    </a>

  </div>

  <!-- External Links Navigation Bar -->
  <table class="external-bar"> <!-- Custom header -->
    <tr>
      <td>
        <div class="external-td">
          <a href="/blog" data-toggle="tooltip" title="Blog Home">
            <div class="external-link-box home-bw"></div>
            <p class="external-link-label">Home</p>
          </a>
        </div>
      </td>
      <td>
        <div class="external-td">
          <a href="https://www.linkedin.com/in/kevinhou22" target="_blank" data-toggle="tooltip" title="LinkedIn">
            <div class="external-link-box linkedin-bw"></div>
            <p class="external-link-label">LinkedIn</p>
          </a>
        </div>
      </td>
      <td>
        <div class="external-td">
          <a href="https://github.com/khou22" target="_blank" data-toggle="tooltip" title="Github">
            <div class="external-link-box github-bw"></div>
            <p class="external-link-label">Github</p>
          </a>
        </div>
      </td>
      <td>
        <div class="external-td">
          <a href="https://www.flickr.com/photos/khou22/albums" target="_blank" data-toggle="tooltip" title="Flickr">
            <div class="external-link-box flickr-bw"></div>
            <p class="external-link-label">Flickr</p>
          </a>
        </div>
      </td>
      <td>
        <div class="external-td">
          <a href="http://kevinhou.wix.com/projects" target="_blank" data-toggle="tooltip" title="Portfolio">
            <div class="external-link-box gallery-bw"></div>
            <p class="external-link-label">Portfolio</p>
          </a>
        </div>
      </td>
      <td>
        <div class="external-td">
          <a href="https://youtube.com/kevinhou22" target="_blank" data-toggle="tooltip" title="YouTube Channel">
            <div class="external-link-box youtube-bw"></div>
            <p class="external-link-label">YouTube</p>
          </a>
        </div>
      </td>
      <td>
        <div class="external-td">
          <a href="http://www.lwhs.org/ftpimages/200/download/download_1401803.pdf" target="_blank" data-toggle="tooltip" title="School Profile">
            <div class="external-link-box highSchool-bw"></div>
            <p class="external-link-label">School Profile</p>
          </a>
        </div>
      </td>
      <td>
        <div class="external-td">
          <a href="/blog/contact" data-toggle="tooltip" title="Contact">
            <div class="external-link-box email-bw"></div>
            <p class="external-link-label">Contact</p>
          </a>
        </div>
      </td>
    </tr>
  </table>

  <!-- Site Navigation Bar -->
  <ul class="nav-ul site-nav-bar">
    <li class="nav-li nav-item">
      <a href="http://khou22.github.io">Home</a>
    </li>
    <li class="nav-li nav-item">
      <a href="/blog">Blog &#9662;</a>
      <ul class="dropdown">
        <li class="nav-li"><a href="/blog/category">Browse by Category</a></li>
        <li class="nav-li"><a href="/blog/tag">Browse by Tag</a></li>
      </ul>
    </li>
    <li class="nav-li nav-item">
      <a href="/blog/apps">Apps &#9662;</a>
      <ul class="dropdown">
        <li class="nav-li"><a href="/blog/apps/text-analysis">Text Analysis</a></li>
        <li class="nav-li"><a href="/blog/apps/stats-test-score-calculator">Honors Stats Test Score Calculator</a></li>
      </ul>
    </li>
    <li class="nav-li nav-item">
      <a href="#">Projects &#9662;</a>
      <ul class="dropdown">
        <li class="nav-li"><a href="/school/optics/">Optics Lab</a></li>
        <li class="nav-li"><a href="/school/postcolonial-africa">Hollywood's Perception of Africa</a></li>
      </ul>
    </li>
    <li class="nav-li nav-item"><a href="/blog/contact">Contact</a></li>
  </ul>

  <!-- Activate Tooltips -->
  <script type="text/javascript">
    $(function () {
      $('[data-toggle="tooltip"]').tooltip()
    })
  </script>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">
  
    
    
      
    

    
        
        
          
            
                
                
            
        
          
            
                
                
            
        
    

    
      
          
            
                
                
            
        
    
  <header class="post-header">
    <p class="post-return-main"><a href="/blog">
      <
      Return to all blogs
    </a></p>
    <br />
    <h1 class="post-title">Creating a Roll Style Number Counter that Mimics a Slot Machine</h1>
    <p class="post-meta">Jul 29, 2015 • 2015-07-29 13:55:41 -0700</p>
  </header>
  <article class="post-content">
    <p>I found a really cool way of making a number counter engaging. A co-worker at Salesforce, named Amy Lee, created a simple React component designed to mimic a slot machine. Instead of simply changing the number, the function “animates” the change and rolls up to that number. The cool thing about this is that it works for any number and it requires no CSS3 animation. It looks neat, especially with huge numbers!</p>

<p>Calling Component:</p>

<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;AnimatedNumber</span> <span class="na">number=</span><span class="s">{this.state.number}</span> <span class="na">time=</span><span class="s">{300}</span> <span class="na">frameRate=</span><span class="s">{20}/</span><span class="nt">&gt;</span>
//Total time: 300ms
//One frame every 20 ms</code></pre></div>

<p>Component:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">const</span> <span class="nx">AnimatedNumber</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createClass</span><span class="p">({</span>
  <span class="nx">getInitialState</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">number</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">number</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">componentWillReceiveProps</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">number</span> <span class="o">!==</span> <span class="nx">props</span><span class="p">.</span><span class="nx">number</span><span class="p">)</span> <span class="p">{</span> <span class="c1">//If different number</span>
      <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_interval</span><span class="p">)</span> <span class="p">{</span> <span class="c1">//If theres an interval</span>
        <span class="nx">clearInterval</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_interval</span><span class="p">)</span> <span class="c1">//Clear the existing interval</span>
      <span class="p">}</span>
      <span class="kd">let</span> <span class="nx">framesLeft</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">time</span><span class="o">/</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">frameRate</span><span class="p">;</span> <span class="c1">//Determine frame rate</span>
      <span class="kd">let</span> <span class="nx">increment</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">.</span><span class="nx">number</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">number</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="nx">framesLeft</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span> <span class="c1">//Determine increment per frame</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_interval</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">framesLeft</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="c1">//If there are frames</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="nx">number</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">number</span> <span class="o">+</span> <span class="nx">increment</span> <span class="p">});</span> <span class="c1">//Set new number</span>
          <span class="nx">framesLeft</span><span class="o">--</span><span class="p">;</span> <span class="c1">//Subtract a frame</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="c1">//If done</span>
          <span class="nx">clearInterval</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_interval</span><span class="p">);</span> <span class="c1">//Clear the interval</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">_interval</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span> <span class="c1">//Set to null</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="nx">number</span><span class="o">:</span> <span class="nx">props</span><span class="p">.</span><span class="nx">number</span> <span class="p">});</span> <span class="c1">//Set the final value to the exact value just in case</span>
        <span class="p">}</span>
      <span class="p">},</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">frameRate</span><span class="p">);</span> <span class="c1">//How often it repeats</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">span</span><span class="o">&gt;</span>
        <span class="p">{</span><span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">number</span><span class="p">)}</span> <span class="c1">//Round if you don&#39;t want a decimal</span>
      <span class="o">&lt;</span><span class="err">/span&gt;</span>
    <span class="p">)</span>
  <span class="p">}</span>
<span class="p">});</span></code></pre></div>

  </article>
  <p id="post-meta">Posted in <a href="/blog/category/programming/">Programming</a> with <a href="/blog/tag/javascript/">Javascript</a>, <a href="/blog/tag/reactjs/">ReactJS</a></p>
</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Kevin Hou's Blog</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <ul class="contact-list">
          <li>Kevin Hou</li>
          <li><a href="mailto:kevin.ch.hou@gmail.com">kevin.ch.hou@gmail.com</a></li>
          <li>San Francisco Bay Area</li>
        </ul>
      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/khou22" target="_blank">
              <span class="icon  icon--github">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
                </svg>
              </span>

              <span class="username">khou22</span>
            </a>
          </li>
          

          
          <li>
            <a href="https://www.flickr.com/photos/khou22/albums" target="_blank">
              <div class="footer-icon-box flickr-bw"><span class="username">kevinhou22</span></div>
            </a>
          </li>
          

        </ul>
      </div>

      <div class="footer-col  footer-col-3">
        <p class="text">A blog about programming, wood, and anything that comes to my mind. Enjoy.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
